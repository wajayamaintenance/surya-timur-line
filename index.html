<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Hub - Surya Timur Line Group</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        
        :root {
            --primary-blue: #002B5B;
            --secondary-blue: #1A5F7A;
            --accent-gold: #C0A150;
        }

        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .bg-primary { background-color: var(--primary-blue); }
        .text-accent { color: var(--accent-gold); }
        
        .hero-section {
            position: relative;
            background-color: var(--primary-blue);
            overflow: hidden;
            min-height: 400px;
            display: flex;
            align-items: center;
        }

        .hero-bg-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(0, 43, 91, 0.7), rgba(0, 43, 91, 0.8)), 
                              url('https://suryatimurline.com/wp-content/uploads/2024/03/Mask-groupa.jpeg');
            background-size: cover;
            background-position: center;
            opacity: 0.6;
            z-index: 1;
        }

        .hero-content { position: relative; z-index: 2; width: 100%; padding: 40px 0; }
        .transition-smooth { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        .company-btn {
            background: white;
            border: 2px solid #f1f5f9;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            padding: 1.5rem 1rem;
        }

        .company-btn.active {
            border-color: var(--accent-gold);
            background-color: #fffaf0;
            box-shadow: 0 10px 15px -3px rgba(192, 161, 80, 0.2);
            transform: translateY(-4px);
        }

        .company-logo-container {
            width: 100%;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.75rem;
            transition: transform 0.3s ease;
        }

        .company-btn:hover .company-logo-container {
            transform: scale(1.1);
        }

        .select-custom {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23002B5B' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 1rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            appearance: none;
        }

        .service-card {
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            background: white;
            min-height: 220px;
        }
        
        .service-card:hover {
            border-color: var(--accent-gold);
            transform: translateY(-5px);
            box-shadow: 0 12px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .btn-action {
            font-size: 10px; font-weight: 800; padding: 12px 6px;
            border-radius: 10px; transition: all 0.2s;
            text-align: center; display: flex; align-items: center;
            justify-content: center; gap: 6px; width: 100%;
        }

        .item-dropdown {
            font-size: 11px; font-weight: 700; padding: 10px;
            border-radius: 10px; border: 2px solid #f1f5f9;
            background-color: #f8fafc; width: 100%; margin-bottom: 12px;
            cursor: pointer; color: var(--primary-blue);
        }

        .maintenance-title {
            font-size: 14px; font-weight: 800; color: #800000;
            text-transform: uppercase; letter-spacing: 0.025em; line-height: 1.2;
        }

        .controls-container { margin-top: -80px; }
    </style>
</head>
<body class="bg-[#F8FAFC] text-gray-900">

    <!-- Header / Navbar -->
    <nav class="bg-primary text-white p-4 sticky top-0 z-50 shadow-xl">
        <div class="container mx-auto flex justify-between items-center px-4">
            <div class="flex items-center gap-4">
                <div class="bg-white p-2 rounded-xl">
                    <img id="mainLogo" src="LogoWajaya.png" alt="Logo" class="h-10 w-auto object-contain transition-all duration-500" onerror="this.src='https://ui-avatars.com/api/?name=WJL&background=002B5B&color=fff&bold=true'">
                </div>
                <div>
                    <span id="navCompanyName" class="font-extrabold text-xl md:text-2xl block leading-tight text-accent">KOPERASI WAHANA JALA REKADAYA</span>
                    <span id="navCompanyAddress" class="text-[10px] md:text-[12px] font-bold uppercase tracking-[0.2em] text-blue-200 opacity-80">Kota Jakarta Barat, DKI Jakarta</span>
                </div>
            </div>
            <div class="hidden md:block">
                <a href="https://suryatimurline.com/" target="_blank" class="text-xs font-bold px-4 py-2 border border-white/20 rounded-lg hover:bg-white/10 transition-all">
                    <i class="fas fa-globe mr-2"></i>Official Website Surya Timur Line Group
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-bg-overlay"></div>
        <div class="hero-content text-center text-white px-4">
            <div class="max-w-4xl mx-auto">
                <div class="inline-flex items-center gap-2 px-5 py-2 bg-accent-gold/20 border border-accent/40 text-accent rounded-full text-xs font-black mb-8 uppercase tracking-widest shadow-lg backdrop-blur-md">
                    <span class="flex h-2 w-2 rounded-full bg-accent-gold animate-ping"></span>
                    Maintenance Record Portal
                </div>
                <h2 class="text-3xl md:text-5xl font-extrabold mb-4 tracking-tighter drop-shadow-xl">Surya Timur Line Group</h2>
                <p class="text-blue-50 text-base md:text-lg max-w-2xl mx-auto opacity-95 leading-relaxed font-medium mb-12">
                    Akses digital terpusat untuk sertifikasi sistem keselamatan dan dokumentasi teknis armada.
                </p>
            </div>
        </div>
    </section>

    <!-- Navigation Controls -->
    <div class="container mx-auto px-4 relative z-20 controls-container">
        <div class="max-w-6xl mx-auto bg-white rounded-[2rem] shadow-2xl p-6 md:p-10 border border-gray-100">
            
            <!-- Step 1: Select PT -->
            <div class="mb-10">
                <label class="text-primary-blue font-extrabold uppercase tracking-widest text-[13px] mb-6 ml-1 flex items-center gap-2">
                    <i class="fas fa-building text-accent"></i> Pilih Perusahaan (PT)
                </label>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="companyGrid">
                </div>
            </div>

            <!-- Step 2: Select Ship & Year -->
            <div id="shipSelectionArea" class="grid md:grid-cols-2 gap-6 items-end opacity-40 pointer-events-none transition-smooth">
                <div class="flex flex-col">
                    <label class="text-primary-blue font-extrabold uppercase tracking-widest text-[13px] mb-3 ml-1 flex items-center gap-2">
                        <i class="fas fa-ship text-accent"></i> Pilih Armada Kapal
                    </label>
                    <select id="shipSelector" onchange="handleShipChange()" class="select-custom w-full p-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:outline-none focus:border-blue-500 transition-all font-bold text-primary-blue">
                        <option value="">Pilih Perusahaan Dahulu</option>
                    </select>
                </div>
                <div id="yearContainer" class="flex flex-col opacity-40 pointer-events-none transition-smooth">
                    <label class="text-primary-blue font-extrabold uppercase tracking-widest text-[13px] mb-3 ml-1 flex items-center gap-2">
                        <i class="fas fa-calendar-alt text-accent"></i> Pilih Tahun Service
                    </label>
                    <select id="yearSelector" onchange="updateShipPortal()" class="select-custom w-full p-4 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:outline-none focus:border-blue-500 transition-all font-bold text-primary-blue">
                        <option value="">Pilih Kapal Dahulu</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="py-12 container mx-auto px-4">
        <div id="portalDisplay" class="hidden transition-smooth opacity-0 translate-y-8 max-w-6xl mx-auto">
            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Profile -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-[2rem] overflow-hidden border border-gray-100 shadow-xl sticky top-28">
                        <div class="aspect-[4/3] bg-gray-200 overflow-hidden relative">
                            <img id="shipImage" src="" alt="Ship" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        </div>
                        <div class="p-6 text-center">
                            <p id="shipPT" class="text-accent text-[9px] font-black uppercase tracking-[0.2em] mb-1">PT Nama Perusahaan</p>
                            <h3 id="shipNameDisplay" class="text-xl font-extrabold text-primary-blue uppercase leading-tight mb-2">Nama Kapal</h3>
                            <p id="shipType" class="text-[10px] font-bold text-gray-400 mb-4 italic">Ro-Ro Passenger Ship</p>
                            <div id="displayYear" class="text-[11px] font-black text-blue-600 mb-4 bg-blue-50 inline-block px-4 py-1.5 rounded-full uppercase tracking-tighter">
                                Tahun 2025
                            </div>
                            <div class="pt-5 border-t border-gray-100">
                                <span class="inline-flex items-center px-4 py-2 rounded-xl bg-green-50 text-green-600 text-[10px] font-bold">
                                    <i class="fas fa-check-circle mr-2"></i> DATA TERVERIFIKASI
                                </span>
                            </div>  
                        </div>
                    </div>
                </div>
                <!-- Docs -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-[2rem] p-6 md:p-8 border border-gray-100 shadow-sm">
                        <h4 class="text-xs font-black text-primary-blue uppercase tracking-[0.2em] flex items-center gap-3 mb-8">
                            <span class="w-8 h-1 bg-accent rounded-full"></span>
                            Maintenance Documents
                        </h4>
                        <div id="certificateGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="emptyState" class="text-center py-20 max-w-xl mx-auto">
            <div class="w-20 h-20 bg-blue-50 rounded-3xl flex items-center justify-center mx-auto mb-6 rotate-3">
                <i class="fas fa-file-signature text-3xl text-blue-200"></i>
            </div>
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-[0.3em]">Silakan pilih data armada</h3>
            <p class="text-gray-400 text-[11px] mt-2">Pilih Perusahaan, Kapal, dan Tahun untuk memuat dokumen.</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-12 bg-white border-t border-gray-100 mt-20">
        <div class="container mx-auto px-4 text-center">
            <p class="font-black text-primary-blue text-[10px] uppercase tracking-[0.4em] mb-2">KOPERASI WAHANA JALA REKADAYA &copy; 2025</p>
            <p class="text-[9px] text-gray-400 font-bold uppercase tracking-widest">Wajaya Corp</p>
        </div>
    </footer>

    <script>
        const companies = [
            { 
                id: 'pt-alb', 
                name: 'PT ALHADII LAMPUNG BERJAYA', 
                address: '', 
                logo: 'https://suryatimurline.com/wp-content/uploads/2024/03/logo1-1.png',
                ships: ['amarisa'] 
            },
            { 
                id: 'pt-nbc', 
                name: 'PT NAUFAL BROTHERS COMPANY', 
                address: '', 
                logo: 'https://suryatimurline.com/wp-content/uploads/2024/03/logo2-1.png',
                ships: ['amadea', 'nitya'] 
            },
            { 
                id: 'pt-stl', 
                name: 'PT SURYA TIMUR LINE', 
                address: '', 
                logo: 'https://suryatimurline.com/wp-content/uploads/2024/03/logo4-1.png',
                ships: ['rishel', 'zoey', 'eirene'] 
            },
            { 
                id: 'pt-tri', 
                name: 'PT TRANSHIP INDONESIA', 
                address: '', 
                logo: 'https://suryatimurline.com/wp-content/uploads/2024/03/logo3-1.png',
                ships: ['tranship-i'] 
            }
        ];

        const defaultServices = [
            { category: 'CO2 System', cert: '#', doc: '#', icon: 'fas fa-wind' },
            { category: 'EEBD', cert: '#', doc: '#', icon: 'fas fa-mask' },
            { category: 'APAR', cert: '#', doc: '#', icon: 'fas fa-fire-extinguisher' },
            { category: 'HRU', cert: '#', doc: '#', icon: 'fas fa-anchor' },
            { category: 'ILR', cert: '#', doc: '#', icon: 'fas fa-life-ring' },
            { category: 'Lifeboat', cert: '#', doc: '#', icon: 'fas fa-ship' }
        ];

        const fleetData = {
            'amarisa': { name: 'KMP AMARISA', pt: 'PT ALHADII LAMPUNG BERJAYA', type: 'Ro-Ro Passenger Ship', image: 'https://www.shipspotting.com/photos/big/4/9/8/3874894.jpg?cb=0', history: { '2025': [...defaultServices] }},
            'amadea': { name: 'KMP AMADEA', pt: 'PT NAUFAL BROTHERS COMPANY', type: 'Ro-Ro Passenger Ship', image: 'https://i.ytimg.com/vi/BOgi-FnE8l4/maxresdefault.jpg', history: { '2025': [...defaultServices] }},
            'nitya': { name: 'KMP NITYA', pt: 'PT NAUFAL BROTHERS COMPANY', type: 'Ro-Ro Passenger Ship', image: 'https://static.vesselfinder.net/ship-photo/1071484-525801319-2a104b0fa533d4f324add4219f9418a0/1?v1', history: { '2025': [...defaultServices] }},
            'rishel': { name: 'KMP RISHEL', pt: 'PT SURYA TIMUR LINE', type: 'Ro-Ro Passenger Ship', image: 'https://i.ytimg.com/vi/d3quNKC44xI/maxresdefault.jpg', history: { '2025': [...defaultServices] }},
            'zoey': {
                name: 'KMP ZOEY',
                pt: 'PT SURYA TIMUR LINE',
                type: 'Ro-Ro Passenger Ship',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmKTCGWe8u1u0HS8ZCZUx755H04KPjHSycIA&s', 
                history: {
                    '2025': [
                        { category: 'CO2 System', cert: 'https://drive.google.com/file/d/19sKBeWYq0rCL9U1Qyl1vRFWk9Jc259Cp/view?usp=sharing', doc: '#', icon: 'fas fa-wind' },
                        { category: 'EEBD & SCBA', cert: 'https://drive.google.com/file/d/1h7j_eCbzldva28edZOivICnZP3FhLcHi/view?usp=sharing', doc: '#', icon: 'fas fa-mask' },
                        { category: 'Fire Extinguisher (APAR)', icon: 'fas fa-fire-extinguisher', isMultiItem: true,
                            items: [
                            { id: 'APAR_DCS-FE.25.001', cert: 'https://drive.google.com/file/d/1xd2twTLYCC2Q7V0N1yjTCStMDusonMHk/view?usp=sharing', doc: '' },
                            { id: 'APAR_DCS-FE.25.002', cert: 'https://drive.google.com/file/d/1dM79za_kTKOR1VXZSoLfOEsv2RTeE4qU/view?usp=sharing', doc: '' } ]
                        },
                        { category: 'HRU', icon: 'fas fa-anchor', isMultiItem: true, 
                            items: [
                            { id: 'HRU_1701892-1700731-17019891-1700745-1601842-1601847', cert: 'https://drive.google.com/file/d/1uggVs2du4TDnVqy6VvwtK1OV8oYAmeaU/view?usp=sharing', doc: '' },
                            { id: 'HRU_1801175-1800238-1801170-1800247-1801172-1801169', cert: 'https://drive.google.com/file/d/1rOzC6pWcBvF6LQIBillZ8MlG3OmdQefC/view?usp=sharing', doc: '' } ]
                        },
                        { 
                            category: 'ILR', icon: 'fas fa-life-ring', isMultiItem: true,
                            items: [
                                { id: '18308', cert: 'https://drive.google.com/file/d/1rhCI4zcEU6UyKICYcQC1qjekN1joXHmF/view?usp=sharing', doc: '' },
                            { id: '18309', cert: 'https://drive.google.com/file/d/12_WZBmfpMKvtsoAKQ1d7HVFw2iLz_78c/view?usp=drive_link', doc: '' },
                            { id: '18310', cert: 'https://drive.google.com/file/d/1VEstgp-X7Ocn8Ktj2E69u8h13PZtxVAw/view?usp=drive_link', doc: '' },
                            { id: '18311', cert: 'https://drive.google.com/file/d/1BHHsC1vvsNkvCYQnxmCMUxP2HUAfC9Zq/view?usp=drive_link', doc: '' },
                            { id: '18312', cert: 'https://drive.google.com/file/d/1X5Tt-nvbp5GjcKtaDkDo6-XKogH1SIMa/view?usp=drive_link', doc: '' },
                            { id: '18313', cert: 'https://drive.google.com/file/d/1501Au10IC1Dlbeq_YMZjP5ToKSW2R7xa/view?usp=drive_link', doc: '' },
                            { id: '18314', cert: 'https://drive.google.com/file/d/1bfsjQGgBwus7dK8rLlNHDHFr5yEvuMnq/view?usp=drive_link', doc: '' },
                            { id: '18315', cert: 'https://drive.google.com/file/d/1CrwZZI8u2lVUqHe6YexdYYcbDpCOImUM/view?usp=drive_link', doc: '' },
                            { id: '18316', cert: 'https://drive.google.com/file/d/1g-2NM8Y5Wt2_angDBQSSkdd1L_5WQp0U/view?usp=drive_link', doc: '' },
                            { id: '18317', cert: 'https://drive.google.com/file/d/1d8k6L2ZXIxvq8FHWc58h767rKJ8Gd0F0/view?usp=drive_link', doc: '' },
                            { id: '18318', cert: 'https://drive.google.com/file/d/1sbUUOsrtRQ-gz84H3jKB55aGPA6oUOK5/view?usp=drive_link', doc: '' },
                            { id: '18319', cert: 'https://drive.google.com/file/d/1Rra8XJtbo4PFihCLWb5ygbmU3Vudbbv2/view?usp=drive_link', doc: '' },
                            { id: '18320', cert: 'https://drive.google.com/file/d/1KR9U6NxFifNv6Y8e-dv_fy5GL8-iO9MH/view?usp=drive_link', doc: '' },
                            { id: '18321', cert: 'https://drive.google.com/file/d/1sDnSbs8mi4lwlzBFkJO4SM6wSftNN9kC/view?usp=drive_link', doc: '' },
                            { id: '18322', cert: 'https://drive.google.com/drive/folders/1VUDmdr1H5CUaQm6C_fPbOn1zDh0ROdAo?usp=drive_link', doc: '' },
                            { id: '18336', cert: 'https://drive.google.com/file/d/1kQdM5JK8PPg1aq320vuRNGxLHtqADacF/view?usp=drive_link', doc: '' },
                            { id: 'AA-250547', cert: 'https://drive.google.com/file/d/1BRjjQIyFbliiZgO5QbhM6XEPS_a_3NL5/view?usp=drive_link', doc: '' },
                            { id: 'AA-250563', cert: 'https://drive.google.com/file/d/1GjPPAt5IGBOwweglUs2Ap79y1jZWnNcO/view?usp=drive_link', doc: '' },
                            { id: 'AA-250570', cert: 'https://drive.google.com/file/d/13Q0S1MawOg8wmiinZ7TXiZU6SK_1LoNV/view?usp=drive_link', doc: 'AA-250547' },
                            { id: 'AA-250571', cert: 'https://drive.google.com/file/d/19c7R-zTpuhfL6qT-ynolApLdufbNtDPO/view?usp=drive_link', doc: '' },
                            { id: 'S50-17010', cert: 'https://drive.google.com/file/d/101hL0vMMAMsl2wMsdlVVn0CIqZ4Sh0Z0/view?usp=drive_link', doc: '' },
                            { id: 'S50-17011', cert: 'https://drive.google.com/file/d/11T-E-LjirGmhSXVECCAJ0jfsDshw3V7M/view?usp=drive_link', doc: '' }
                            ] 
                        }
                    ],
                    '2026': [
                        { category: 'CO2 System', cert: 'https://drive.google.com/file/d/167wMpmIdOvG2azPuvfLqRnnTa2DQ0oXt/view?usp=sharing', doc: 'https://drive.google.com/drive/folders/1fK853VsC1Py0wn_72yEwSqPkY-EkYIJQ?usp=sharing', icon: 'fas fa-wind' },
                        { category: 'EEBD & SCBA', cert: 'https://drive.google.com/file/d/1yxjvZoDwXbY-_d77trA2A37F5gXJ1nHQ/view?usp=sharing', doc: 'https://drive.google.com/drive/folders/1o1R3q07qGlKnugCLFRhxuNqoeGtAUVlj?usp=sharing', icon: 'fas fa-mask' },
                        { category: 'Fire Extinguisher (APAR)', cert: 'https://drive.google.com/file/d/1cLQY02L0zGU2_x_aVQLlEuVz1o6UNOhL/view?usp=sharing', doc: 'https://drive.google.com/file/d/1GZY48yPXgXOUISAgmU_PqnnwqaY9IfJq/view?usp=sharing', icon: 'fas fa-fire-extinguisher'},
                        { category: 'HRU', cert: 'https://drive.google.com/file/d/1xulCmSN5EAnNXScA5pGhYtpVsKgBP25y/view?usp=sharing', doc: 'https://drive.google.com/drive/folders/1VevB-_tSig3GOU7UJZKILJBmhKZWS094?usp=sharing', icon: 'fas fa-anchor' },
                        { 
                            category: 'ILR', icon: 'fas fa-life-ring', isMultiItem: true,
                            items: [
                                { id: '18308', cert: 'https://drive.google.com/file/d/14CIIoIxwLb2--sbEpM5ayD9tSEuzdqoK/view?usp=sharing', doc: 'https://drive.google.com/drive/folders/1A76fVgSOHCMok49BNRe1Ht-lStFJCyEw?usp=sharing' },
                            { id: '18309', cert: 'https://drive.google.com/drive/folders/1UxUcydxhMmBZeKj7uCoGiuF_iqYRch2y?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1JaZCjll_fuXifIonywU_xxnvRw87vuTV?usp=sharing' },
                            { id: '18310', cert: 'https://drive.google.com/file/d/1zp4APCFeF27KRwSz2SeiZaN4MIZB7jGB/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1SMRJH9PJrkoraYAJ3jdB3nCtXiKujbMH?usp=drive_link' },
                            { id: '18311', cert: 'https://drive.google.com/file/d/1EkoBwlwD6DQLJy0Ql5zb3BqMREGqUe0E/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1P7Hx68k_2eZbNjLQs5O4lviSHacjl-c3?usp=drive_link' },
                            { id: '18312', cert: 'https://drive.google.com/file/d/1klgOQvXwSTh2VGpi6XtkRptHF1lrxX48/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1AGPVsELdB2ha2PJz0qG0VyUpwQqLC9z9?usp=drive_link' },
                            { id: '18313', cert: 'https://drive.google.com/file/d/1yiDubaAJPGtv40negcPNQjuz7ArPL_99/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1nfwNs-owamhPhSbfazRAkvnL8K37R4YD?usp=drive_link' },
                            { id: '18314', cert: 'https://drive.google.com/file/d/1VPE8A31SMl3PxXiCZM12orEM-XBnhCoX/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/17V-tCCama08bAsJxykUK9ad_71BPL8qN?usp=drive_link' },
                            { id: '18315', cert: 'https://drive.google.com/file/d/1wBkciWZ8wzVNSEjvmpXjoEljLC0iCPvH/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1qjupYrtoCfUOi2sFv8-chWh2Rt68-JNF?usp=drive_link' },
                            { id: '18316', cert: 'https://drive.google.com/file/d/19YAdfD9IuYyOT5jo4Uf4T8XptJvxkTMB/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1pABeDu-7Ypy1WZvOfHbBwva347Nd5Czx?usp=drive_link' },
                            { id: '18317', cert: 'https://drive.google.com/file/d/1BheePqXXglyOkl2pt3fbTRiMuLgGK628/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1vzTanNuOB4Szk3uR7aBIxCTmOgM9xJO-?usp=drive_link' },
                            { id: '18318', cert: 'https://drive.google.com/file/d/1SjfJPAkd6hgOmA2d-Q6cMEX41Q7KggNb/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1_FhuvOA5hQ3i4eAdkTqT8B3GY1lLbmGm?usp=drive_link' },
                            { id: '18319', cert: 'https://drive.google.com/file/d/1WuA9mL2M1VqprahnXWPRP9Q2kV4hbFlF/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/13uckAvRfKA1wnKKyUCoLgeVx5OdDT8z9?usp=drive_link' },
                            { id: '18320', cert: 'https://drive.google.com/file/d/1TR_ZzKbzvyjS6f3teqJra5OttNOQOR1V/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1Lzf6oTGm1sxhQL35qhXB542NHSnywz5Q?usp=drive_link' },
                            { id: '18321', cert: 'https://drive.google.com/file/d/1Z35NhVZWMg9E8VejFrd_oMridNEf_9aV/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1V_lpMAaxXrrdS2KfY_XhjLFBz1ERP8Gk?usp=drive_link' },
                            { id: '18322', cert: 'https://drive.google.com/file/d/1fZ2jBQeH-Livn20r4jLWDgqQfx_4w3qH/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1VnGErx-bvQ-_hE_7qfTwOZxP5HzJH6N2?usp=drive_link' },
                            { id: '18336', cert: 'https://drive.google.com/file/d/13QMh11-fcAGGPuubeytoOcoC_UdQKIu2/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1aRuj6VMs3k3p89v08L8tDBmsoHHH01dJ?usp=drive_link' },
                            { id: 'AA-250547', cert: 'https://drive.google.com/file/d/1i7fg8XXLQau2fYt5ap14_tLKAQkW8jmU/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1VdvTz9XI27a1AMT4Y99CF-UxJ_d4JzrM?usp=drive_link' },
                            { id: 'AA-250563', cert: 'https://drive.google.com/file/d/1_jXewJTF7Z_LJAH7IHcwYhOti0vXqi2N/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1T--UcOeRGc5QLsPcxUfYO5Ckug89N9D2?usp=drive_link' },
                            { id: 'AA-250570', cert: 'https://drive.google.com/file/d/1QHtZAG9VSOGBJyzZarvdBbMX2A-ZS_JB/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1mIS2tTiS-z8VbGRuhRyoOQ7SK3Yc7BQc?usp=drive_link' },
                            { id: 'AA-250571', cert: 'https://drive.google.com/file/d/1lqqR4vNZyLXJbMdfWwnyKVTu00mocbrD/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1xGft8P4y9k_D2zoNfjDWb1xkhwBraWU7?usp=drive_link' },
                            { id: 'S50-17010', cert: 'https://drive.google.com/file/d/1YFnyeao8gQq8DhUY0NiQEr8hQ52giPJk/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1FQbaAG9LRpEXKMw5OSKuKqVLnpp3MRSP?usp=drive_link' },
                            { id: 'S50-17011', cert: 'https://drive.google.com/file/d/1_ANgXKRwkCiR6G0IgB3uwKTvY6E7J0Wg/view?usp=drive_link', doc: 'https://drive.google.com/drive/folders/1DYsWcfUQ7pR8M082eAdZlVvPQwth_JMG?usp=drive_link' },
                            { id: 'Proses Penurunan ILR', doc: 'https://drive.google.com/file/d/1CLmmtE1p1anlfxrFO-y2KosXxkGdNGrR/view?usp=sharing' }
                            ] 
                        },
                        { category: 'Lifeboat', cert: 'https://drive.google.com/file/d/1vQW3hQ3j5l0LgC1fLf-fVsz6Wt0MDaPf/view?usp=sharing', doc: 'https://drive.google.com/drive/folders/126jEHFzES29-L2qTdTnhl85nnh0ts__Z?usp=sharing', icon: 'fas fa-ship' }
                    ]
                }
            },
            'eirene': { name: 'KMP EIRENE', pt: 'PT SURYA TIMUR LINE', type: 'Ro-Ro Passenger Ship', image: 'https://static.vesselfinder.net/ship-photo/1047639-525701487-0f10aba875d56a11d3830a9b890f9353/1?v1', history: { '2025': [...defaultServices] }},
            'tranship-i': { name: 'KMP TRANSHIP I', pt: 'PT TRANSHIP INDONESIA', type: 'Ro-Ro Passenger Ship', image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTtFzeGV-78Dum9zR9jjAqrrSVt0yXAjHSumw&s', history: { '2025': [...defaultServices] }}
        };

        let selectedPT = null;

        function init() {
            const grid = document.getElementById('companyGrid');
            companies.forEach(company => {
                const btn = document.createElement('button');
                btn.className = 'company-btn rounded-3xl flex flex-col items-center group shadow-sm';
                btn.id = `btn-${company.id}`;
                btn.onclick = () => selectCompany(company.id);
                btn.innerHTML = `
                    <div class="company-logo-container">
                        <img src="${company.logo}" class="max-h-full max-w-[85%] object-contain filter grayscale group-hover:grayscale-0 transition-all duration-300" 
                             onerror="this.src='https://ui-avatars.com/api/?name=${company.id}&background=002B5B&color=fff'">
                    </div>
                    <span class="font-black text-[9px] md:text-[10px] block leading-tight text-gray-400 group-hover:text-primary-blue transition-colors uppercase tracking-widest text-center px-2">
                        ${company.name}
                    </span>
                `;
                grid.appendChild(btn);
            });
        }

        function selectCompany(compId) {
            selectedPT = compId;
            const company = companies.find(c => c.id === compId);

            const mainLogo = document.getElementById('mainLogo');
            const navName = document.getElementById('navCompanyName');
            const navAddress = document.getElementById('navCompanyAddress');
            
            mainLogo.src = company.logo;
            navName.innerText = company.name;
            navAddress.innerText = company.address;

            document.querySelectorAll('.company-btn').forEach(b => {
                b.classList.remove('active');
                b.querySelector('img').classList.add('grayscale');
                b.querySelector('span').classList.replace('text-primary-blue', 'text-gray-400');
            });

            const activeBtn = document.getElementById(`btn-${compId}`);
            activeBtn.classList.add('active');
            activeBtn.querySelector('img').classList.remove('grayscale');
            activeBtn.querySelector('span').classList.replace('text-gray-400', 'text-primary-blue');

            const shipSelector = document.getElementById('shipSelector');
            shipSelector.innerHTML = '<option value="">-- Pilih Nama Kapal --</option>';
            company.ships.forEach(sId => {
                const opt = document.createElement('option');
                opt.value = sId;
                opt.text = fleetData[sId].name;
                shipSelector.appendChild(opt);
            });

            const shipArea = document.getElementById('shipSelectionArea');
            shipArea.classList.remove('opacity-40', 'pointer-events-none');
            
            document.getElementById('portalDisplay').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
            document.getElementById('yearContainer').classList.add('opacity-40', 'pointer-events-none');
        }

        function handleShipChange() {
            const shipId = document.getElementById('shipSelector').value;
            const yearContainer = document.getElementById('yearContainer');
            const yearSelector = document.getElementById('yearSelector');

            if (!shipId) {
                yearContainer.classList.add('opacity-40', 'pointer-events-none');
                return;
            }

            const years = Object.keys(fleetData[shipId].history).sort((a, b) => b - a);
            yearSelector.innerHTML = years.map(yr => `<option value="${yr}">Tahun Service ${yr}</option>`).join('');
            
            yearContainer.classList.remove('opacity-40', 'pointer-events-none');
            updateShipPortal(); 
        }

        function updateShipPortal() {
            const shipId = document.getElementById('shipSelector').value;
            const year = document.getElementById('yearSelector').value;
            const portal = document.getElementById('portalDisplay');
            const grid = document.getElementById('certificateGrid');

            if (!shipId || !year) return;

            const shipData = fleetData[shipId];
            const records = shipData.history[year];

            grid.innerHTML = '';
            records.forEach((item, index) => {
                let cardHTML = '';
                if (item.isMultiItem) {
                    const options = item.items.map(it => `<option value="${it.id}" data-cert="${it.cert || '#'}" data-doc="${it.doc || '#'}">ID: ${it.id}</option>`).join('');
                    cardHTML = `
                        <div class="service-card rounded-2xl p-5 border-blue-50">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center text-primary-blue border border-blue-100 text-lg">
                                    <i class="${item.icon}"></i>
                                </div>
                                <div>
                                    <h5 class="maintenance-title">${item.category}</h5>
                                    <span class="text-[8px] font-bold text-accent px-1.5 py-0.5 bg-accent/10 rounded uppercase">Multiple Unit</span>
                                </div>
                            </div>
                            <select onchange="changeMultiItem(this, ${index})" class="item-dropdown">${options}</select>
                            <div class="grid grid-cols-2 gap-2 mt-auto">
                                <a id="cert-link-${index}" href="${item.items[0].cert || '#'}" target="_blank" class="btn-action bg-blue-600 text-white ${(!item.items[0].cert || item.items[0].cert === '#') ? 'opacity-50 pointer-events-none' : ''}"><i class="fas fa-file-pdf"></i> SERTIFIKAT</a>
                                <a id="doc-link-${index}" href="${item.items[0].doc || '#'}" target="_blank" class="btn-action bg-amber-500 text-white ${(!item.items[0].doc || item.items[0].doc === '#') ? 'opacity-50 pointer-events-none' : ''}"><i class="fas fa-camera"></i> DOKUMEN</a>
                            </div>
                        </div>
                    `;
                } else {
                    cardHTML = `
                        <div class="service-card rounded-2xl p-5">
                            <div class="flex items-center gap-3 mb-8">
                                <div class="w-10 h-10 bg-gray-50 rounded-xl flex items-center justify-center text-primary-blue border border-gray-100 text-lg">
                                    <i class="${item.icon}"></i>
                                </div>
                                <h5 class="maintenance-title">${item.category}</h5>
                            </div>
                            <div class="grid grid-cols-2 gap-2 mt-auto">
                                <a href="${item.cert}" target="_blank" class="btn-action bg-blue-600 text-white ${item.cert === '#' ? 'opacity-50 pointer-events-none' : ''}"><i class="fas fa-file-pdf"></i> SERTIFIKAT</a>
                                <a href="${item.doc}" target="_blank" class="btn-action bg-amber-500 text-white ${item.doc === '#' ? 'opacity-50 pointer-events-none' : ''}"><i class="fas fa-camera"></i> DOKUMEN</a>
                            </div>
                        </div>
                    `;
                }
                grid.insertAdjacentHTML('beforeend', cardHTML);
            });

            document.getElementById('shipPT').innerText = shipData.pt;
            document.getElementById('shipNameDisplay').innerText = shipData.name;
            document.getElementById('shipType').innerText = shipData.type;
            document.getElementById('shipImage').src = shipData.image;
            document.getElementById('displayYear').innerText = `Tahun Service ${year}`;

            document.getElementById('emptyState').classList.add('hidden');
            portal.classList.remove('hidden');
            setTimeout(() => {
                portal.classList.remove('opacity-0', 'translate-y-8');
                portal.classList.add('opacity-100', 'translate-y-0');
            }, 50);
        }

        function changeMultiItem(selectElement, index) {
            const opt = selectElement.options[selectElement.selectedIndex];
            const certLink = document.getElementById(`cert-link-${index}`);
            const docLink = document.getElementById(`doc-link-${index}`);
            const certUrl = opt.getAttribute('data-cert');
            const docUrl = opt.getAttribute('data-doc');

            certLink.href = certUrl;
            docLink.href = docUrl;

            certLink.classList.toggle('opacity-50', certUrl === '#');
            certLink.classList.toggle('pointer-events-none', certUrl === '#');
            docLink.classList.toggle('opacity-50', docUrl === '#');
            docLink.classList.toggle('pointer-events-none', docUrl === '#');
        }

        window.onload = init;
    </script>
</body>
</html>
